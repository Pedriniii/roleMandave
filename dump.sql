CREATE DATABASE rolemandave;

-- Tabela de Pessoas
CREATE TABLE Pessoas (
    ID SERIAL PRIMARY KEY,
    NOME VARCHAR(160) NOT NULL,
    EMAIL VARCHAR(255) UNIQUE NOT NULL,
    APELIDO VARCHAR(12) NOT NULL,
    SENHA TEXT NOT NULL
);

-- Tabela de Passeios
CREATE TABLE  Passeios (
    ID SERIAL PRIMARY KEY,
    DESCRICAO VARCHAR(255) NOT NULL,
    QTD_MAX_PESSOAS INT NOT NULL,
    QTD_ATUAL_PESSOAS INT NOT NULL,
    DATA_INICIO DATE NOT NULL,
    DATA_FIM DATE NOT NULL
);

-- Tabela de Pessoas_Passeios
CREATE TABLE  Pessoas_Passeios (
    ID SERIAL PRIMARY KEY,
    ID_PESSOA INT NOT NULL,
    ID_PASSEIO INT NOT NULL,
    FOREIGN KEY (ID_PESSOA) REFERENCES Pessoas(ID),
    FOREIGN KEY (ID_PASSEIO) REFERENCES Passeios(ID) 
);

-- Tabela de Recebimentos
CREATE TABLE  Recebimentos (
    ID SERIAL PRIMARY KEY,
    ID_PESSOA INT NOT NULL,
    ID_PASSEIO INT NOT NULL,
    VALOR_PAGO DECIMAL(10, 2) NOT NULL,
    DATA_RECEBIMENTO DATE NOT NULL,
    TIME_STAMP TIMESTAMP,
    FOREIGN KEY (ID_PESSOA) REFERENCES Pessoas(ID),
    FOREIGN KEY (ID_PASSEIO) REFERENCES Passeios(ID)
);

-- Tabela de Or√ßamentos
CREATE TABLE Orcamentos (
    ID SERIAL PRIMARY KEY,
    ID_PASSEIO INT NOT NULL,
    DESCRICAO VARCHAR(255) NOT NULL,
    UNIDADE_DE_MEDIDA VARCHAR(10) NOT NULL,
    QTD DECIMAL (10, 1) NOT NULL,
    VALOR DECIMAL(10, 2) NOT NULL,
    TOTAL DECIMAL(10, 2)NOT NULL
    FOREIGN KEY (ID_PASSEIO) REFERENCES Passeios(ID)
);